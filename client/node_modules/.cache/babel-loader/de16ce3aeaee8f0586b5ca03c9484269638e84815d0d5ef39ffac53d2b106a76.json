{"ast":null,"code":"import{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import CommentForm from\"../components/CommentForm\";import CommentList from\"../components/CommentList\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EventDetails(){var _event$logo,_event$venue,_event$venue$address,_event$venue$address$,_event$category;const{id}=useParams();const[event,setEvent]=useState(null);const[comments,setComments]=useState([]);useEffect(()=>{const fetchEvent=async()=>{try{const res=await axios.get(`${process.env.REACT_APP_API_URL}/api/events/search`,{params:{city:\"\"}// Broad search to find event\n});const foundEvent=res.data.find(e=>e.id===id);setEvent(foundEvent);}catch(err){var _err$response,_err$response$data;toast.error(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to fetch event\");}};const fetchComments=async()=>{try{const res=await axios.get(`${process.env.REACT_APP_API_URL}/api/comments/${id}`);setComments(res.data);}catch(err){var _err$response2,_err$response2$data;toast.error(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Failed to fetch comments\");}};fetchEvent();fetchComments();},[id]);if(!event)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"fade-in\",children:[/*#__PURE__*/_jsx(\"h1\",{children:event.name.text}),/*#__PURE__*/_jsx(\"img\",{src:((_event$logo=event.logo)===null||_event$logo===void 0?void 0:_event$logo.url)||\"https://via.placeholder.com/600x300\",alt:event.name.text,className:\"img-fluid mb-3\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(event.start.local).toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",((_event$venue=event.venue)===null||_event$venue===void 0?void 0:(_event$venue$address=_event$venue.address)===null||_event$venue$address===void 0?void 0:(_event$venue$address$=_event$venue$address.localized_multi_line_address_display)===null||_event$venue$address$===void 0?void 0:_event$venue$address$.join(\", \"))||\"Unknown\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",((_event$category=event.category)===null||_event$category===void 0?void 0:_event$category.name)||\"General\"]}),/*#__PURE__*/_jsx(\"p\",{children:event.description.text||\"No description available.\"}),/*#__PURE__*/_jsx(CommentForm,{eventbriteId:id}),/*#__PURE__*/_jsx(CommentList,{comments:comments})]});}export default EventDetails;","map":{"version":3,"names":["useState","useEffect","useParams","axios","CommentForm","CommentList","toast","jsx","_jsx","jsxs","_jsxs","EventDetails","_event$logo","_event$venue","_event$venue$address","_event$venue$address$","_event$category","id","event","setEvent","comments","setComments","fetchEvent","res","get","process","env","REACT_APP_API_URL","params","city","foundEvent","data","find","e","err","_err$response","_err$response$data","error","response","message","fetchComments","_err$response2","_err$response2$data","children","className","name","text","src","logo","url","alt","Date","start","local","toLocaleString","venue","address","localized_multi_line_address_display","join","category","description","eventbriteId"],"sources":["C:/Users/bert0/bootcamp/project3/Eventure/client/src/pages/EventDetails.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport CommentForm from \"../components/CommentForm\";\r\nimport CommentList from \"../components/CommentList\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction EventDetails() {\r\n  const { id } = useParams();\r\n  const [event, setEvent] = useState(null);\r\n  const [comments, setComments] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchEvent = async () => {\r\n      try {\r\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/events/search`, {\r\n          params: { city: \"\" }, // Broad search to find event\r\n        });\r\n        const foundEvent = res.data.find((e) => e.id === id);\r\n        setEvent(foundEvent);\r\n      } catch (err) {\r\n        toast.error(err.response?.data?.message || \"Failed to fetch event\");\r\n      }\r\n    };\r\n\r\n    const fetchComments = async () => {\r\n      try {\r\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/comments/${id}`);\r\n        setComments(res.data);\r\n      } catch (err) {\r\n        toast.error(err.response?.data?.message || \"Failed to fetch comments\");\r\n      }\r\n    };\r\n\r\n    fetchEvent();\r\n    fetchComments();\r\n  }, [id]);\r\n\r\n  if (!event) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"fade-in\">\r\n      <h1>{event.name.text}</h1>\r\n      <img\r\n        src={event.logo?.url || \"https://via.placeholder.com/600x300\"}\r\n        alt={event.name.text}\r\n        className=\"img-fluid mb-3\"\r\n      />\r\n      <p>\r\n        <strong>Date:</strong> {new Date(event.start.local).toLocaleString()}\r\n      </p>\r\n      <p>\r\n        <strong>Location:</strong>{\" \"}\r\n        {event.venue?.address?.localized_multi_line_address_display?.join(\", \") ||\r\n          \"Unknown\"}\r\n      </p>\r\n      <p>\r\n        <strong>Category:</strong> {event.category?.name || \"General\"}\r\n      </p>\r\n      <p>{event.description.text || \"No description available.\"}</p>\r\n      <CommentForm eventbriteId={id} />\r\n      <CommentList comments={comments} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EventDetails;"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,OAASC,KAAK,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,QAAS,CAAAC,YAAYA,CAAA,CAAG,KAAAC,WAAA,CAAAC,YAAA,CAAAC,oBAAA,CAAAC,qBAAA,CAAAC,eAAA,CACtB,KAAM,CAAEC,EAAG,CAAC,CAAGf,SAAS,CAAC,CAAC,CAC1B,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACoB,QAAQ,CAAEC,WAAW,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,oBAAoB,CAAE,CAChFC,MAAM,CAAE,CAAEC,IAAI,CAAE,EAAG,CAAG;AACxB,CAAC,CAAC,CACF,KAAM,CAAAC,UAAU,CAAGP,GAAG,CAACQ,IAAI,CAACC,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAAChB,EAAE,GAAKA,EAAE,CAAC,CACpDE,QAAQ,CAACW,UAAU,CAAC,CACtB,CAAE,MAAOI,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZ9B,KAAK,CAAC+B,KAAK,CAAC,EAAAF,aAAA,CAAAD,GAAG,CAACI,QAAQ,UAAAH,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcJ,IAAI,UAAAK,kBAAA,iBAAlBA,kBAAA,CAAoBG,OAAO,GAAI,uBAAuB,CAAC,CACrE,CACF,CAAC,CAED,KAAM,CAAAC,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAjB,GAAG,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,iBAAiBV,EAAE,EAAE,CAAC,CAClFI,WAAW,CAACE,GAAG,CAACQ,IAAI,CAAC,CACvB,CAAE,MAAOG,GAAG,CAAE,KAAAO,cAAA,CAAAC,mBAAA,CACZpC,KAAK,CAAC+B,KAAK,CAAC,EAAAI,cAAA,CAAAP,GAAG,CAACI,QAAQ,UAAAG,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAAcV,IAAI,UAAAW,mBAAA,iBAAlBA,mBAAA,CAAoBH,OAAO,GAAI,0BAA0B,CAAC,CACxE,CACF,CAAC,CAEDjB,UAAU,CAAC,CAAC,CACZkB,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,CAACvB,EAAE,CAAC,CAAC,CAER,GAAI,CAACC,KAAK,CAAE,mBAAOV,IAAA,QAAAmC,QAAA,CAAK,YAAU,CAAK,CAAC,CAExC,mBACEjC,KAAA,QAAKkC,SAAS,CAAC,SAAS,CAAAD,QAAA,eACtBnC,IAAA,OAAAmC,QAAA,CAAKzB,KAAK,CAAC2B,IAAI,CAACC,IAAI,CAAK,CAAC,cAC1BtC,IAAA,QACEuC,GAAG,CAAE,EAAAnC,WAAA,CAAAM,KAAK,CAAC8B,IAAI,UAAApC,WAAA,iBAAVA,WAAA,CAAYqC,GAAG,GAAI,qCAAsC,CAC9DC,GAAG,CAAEhC,KAAK,CAAC2B,IAAI,CAACC,IAAK,CACrBF,SAAS,CAAC,gBAAgB,CAC3B,CAAC,cACFlC,KAAA,MAAAiC,QAAA,eACEnC,IAAA,WAAAmC,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,CAAC,GAAI,CAAAQ,IAAI,CAACjC,KAAK,CAACkC,KAAK,CAACC,KAAK,CAAC,CAACC,cAAc,CAAC,CAAC,EACnE,CAAC,cACJ5C,KAAA,MAAAiC,QAAA,eACEnC,IAAA,WAAAmC,QAAA,CAAQ,WAAS,CAAQ,CAAC,CAAC,GAAG,CAC7B,EAAA9B,YAAA,CAAAK,KAAK,CAACqC,KAAK,UAAA1C,YAAA,kBAAAC,oBAAA,CAAXD,YAAA,CAAa2C,OAAO,UAAA1C,oBAAA,kBAAAC,qBAAA,CAApBD,oBAAA,CAAsB2C,oCAAoC,UAAA1C,qBAAA,iBAA1DA,qBAAA,CAA4D2C,IAAI,CAAC,IAAI,CAAC,GACrE,SAAS,EACV,CAAC,cACJhD,KAAA,MAAAiC,QAAA,eACEnC,IAAA,WAAAmC,QAAA,CAAQ,WAAS,CAAQ,CAAC,IAAC,CAAC,EAAA3B,eAAA,CAAAE,KAAK,CAACyC,QAAQ,UAAA3C,eAAA,iBAAdA,eAAA,CAAgB6B,IAAI,GAAI,SAAS,EAC5D,CAAC,cACJrC,IAAA,MAAAmC,QAAA,CAAIzB,KAAK,CAAC0C,WAAW,CAACd,IAAI,EAAI,2BAA2B,CAAI,CAAC,cAC9DtC,IAAA,CAACJ,WAAW,EAACyD,YAAY,CAAE5C,EAAG,CAAE,CAAC,cACjCT,IAAA,CAACH,WAAW,EAACe,QAAQ,CAAEA,QAAS,CAAE,CAAC,EAChC,CAAC,CAEV,CAEA,cAAe,CAAAT,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}