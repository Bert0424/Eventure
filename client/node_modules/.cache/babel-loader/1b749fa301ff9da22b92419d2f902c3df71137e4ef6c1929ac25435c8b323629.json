{"ast":null,"code":"import{useState,useContext}from\"react\";import axios from\"axios\";import AuthContext from\"../context/AuthContext\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CommentForm(_ref){let{eventbriteId}=_ref;const[text,setText]=useState(\"\");const{user}=useContext(AuthContext);const handleSubmit=async e=>{e.preventDefault();if(!user){toast.error(\"Please log in to comment\");return;}try{await axios.post(`${process.env.REACT_APP_API_URL}/api/comments`,{eventbriteId,text},{headers:{Authorization:`Bearer ${user.token}`}});setText(\"\");toast.success(\"Comment added!\");window.location.reload();// Refresh to show new comment\n}catch(err){var _err$response,_err$response$data;toast.error(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to add comment\");}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:text,onChange:e=>setText(e.target.value),placeholder:\"Add a comment...\",required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Post Comment\"})]});}export default CommentForm;","map":{"version":3,"names":["useState","useContext","axios","AuthContext","toast","jsx","_jsx","jsxs","_jsxs","CommentForm","_ref","eventbriteId","text","setText","user","handleSubmit","e","preventDefault","error","post","process","env","REACT_APP_API_URL","headers","Authorization","token","success","window","location","reload","err","_err$response","_err$response$data","response","data","message","onSubmit","className","children","value","onChange","target","placeholder","required","type"],"sources":["C:/Users/bert0/bootcamp/project3/Eventure/client/src/components/CommentForm.js"],"sourcesContent":["import { useState, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport AuthContext from \"../context/AuthContext\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction CommentForm({ eventbriteId }) {\r\n  const [text, setText] = useState(\"\");\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!user) {\r\n      toast.error(\"Please log in to comment\");\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/api/comments`,\r\n        { eventbriteId, text },\r\n        { headers: { Authorization: `Bearer ${user.token}` } }\r\n      );\r\n      setText(\"\");\r\n      toast.success(\"Comment added!\");\r\n      window.location.reload(); // Refresh to show new comment\r\n    } catch (err) {\r\n      toast.error(err.response?.data?.message || \"Failed to add comment\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"mb-3\">\r\n      <div className=\"mb-3\">\r\n        <textarea\r\n          className=\"form-control\"\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n          placeholder=\"Add a comment...\"\r\n          required\r\n        ></textarea>\r\n      </div>\r\n      <button type=\"submit\" className=\"btn btn-primary\">\r\n        Post Comment\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default CommentForm;"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,WAAW,KAAM,wBAAwB,CAChD,OAASC,KAAK,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,QAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAmB,IAAlB,CAAEC,YAAa,CAAC,CAAAD,IAAA,CACnC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAAEc,IAAK,CAAC,CAAGb,UAAU,CAACE,WAAW,CAAC,CAExC,KAAM,CAAAY,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CAACH,IAAI,CAAE,CACTV,KAAK,CAACc,KAAK,CAAC,0BAA0B,CAAC,CACvC,OACF,CACA,GAAI,CACF,KAAM,CAAAhB,KAAK,CAACiB,IAAI,CACd,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,eAAe,CAC/C,CAAEX,YAAY,CAAEC,IAAK,CAAC,CACtB,CAAEW,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUV,IAAI,CAACW,KAAK,EAAG,CAAE,CACvD,CAAC,CACDZ,OAAO,CAAC,EAAE,CAAC,CACXT,KAAK,CAACsB,OAAO,CAAC,gBAAgB,CAAC,CAC/BC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAE;AAC5B,CAAE,MAAOC,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZ5B,KAAK,CAACc,KAAK,CAAC,EAAAa,aAAA,CAAAD,GAAG,CAACG,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcG,IAAI,UAAAF,kBAAA,iBAAlBA,kBAAA,CAAoBG,OAAO,GAAI,uBAAuB,CAAC,CACrE,CACF,CAAC,CAED,mBACE3B,KAAA,SAAM4B,QAAQ,CAAErB,YAAa,CAACsB,SAAS,CAAC,MAAM,CAAAC,QAAA,eAC5ChC,IAAA,QAAK+B,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBhC,IAAA,aACE+B,SAAS,CAAC,cAAc,CACxBE,KAAK,CAAE3B,IAAK,CACZ4B,QAAQ,CAAGxB,CAAC,EAAKH,OAAO,CAACG,CAAC,CAACyB,MAAM,CAACF,KAAK,CAAE,CACzCG,WAAW,CAAC,kBAAkB,CAC9BC,QAAQ,MACC,CAAC,CACT,CAAC,cACNrC,IAAA,WAAQsC,IAAI,CAAC,QAAQ,CAACP,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,cAElD,CAAQ,CAAC,EACL,CAAC,CAEX,CAEA,cAAe,CAAA7B,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}