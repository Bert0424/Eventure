{"ast":null,"code":"import{useContext}from\"react\";import AuthContext from\"../context/AuthContext\";import axios from\"axios\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CommentList(_ref){let{comments}=_ref;const{user}=useContext(AuthContext);const handleDelete=async id=>{try{await axios.delete(`${process.env.REACT_APP_API_URL}/api/comments/${id}`,{headers:{Authorization:`Bearer ${user.token}`}});toast.success(\"Comment deleted\");window.location.reload();// Refresh to update list\n}catch(err){var _err$response,_err$response$data;toast.error(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to delete comment\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-section\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Comments\"}),comments.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No comments yet.\"}):comments.map(comment=>/*#__PURE__*/_jsxs(\"div\",{className:\"border-bottom py-2\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:comment.userId.email}),\": \",comment.text]}),user&&user.token&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-danger\",onClick:()=>handleDelete(comment._id),children:\"Delete\"})]},comment._id))]});}export default CommentList;","map":{"version":3,"names":["useContext","AuthContext","axios","toast","jsx","_jsx","jsxs","_jsxs","CommentList","_ref","comments","user","handleDelete","id","delete","process","env","REACT_APP_API_URL","headers","Authorization","token","success","window","location","reload","err","_err$response","_err$response$data","error","response","data","message","className","children","length","map","comment","userId","email","text","onClick","_id"],"sources":["C:/Users/bert0/bootcamp/project3/Eventure/client/src/components/CommentList.js"],"sourcesContent":["import { useContext } from \"react\";\r\nimport AuthContext from \"../context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction CommentList({ comments }) {\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await axios.delete(`${process.env.REACT_APP_API_URL}/api/comments/${id}`, {\r\n        headers: { Authorization: `Bearer ${user.token}` },\r\n      });\r\n      toast.success(\"Comment deleted\");\r\n      window.location.reload(); // Refresh to update list\r\n    } catch (err) {\r\n      toast.error(err.response?.data?.message || \"Failed to delete comment\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"comment-section\">\r\n      <h5>Comments</h5>\r\n      {comments.length === 0 ? (\r\n        <p>No comments yet.</p>\r\n      ) : (\r\n        comments.map((comment) => (\r\n          <div key={comment._id} className=\"border-bottom py-2\">\r\n            <p>\r\n              <strong>{comment.userId.email}</strong>: {comment.text}\r\n            </p>\r\n            {user && user.token && (\r\n              <button\r\n                className=\"btn btn-sm btn-danger\"\r\n                onClick={() => handleDelete(comment._id)}\r\n              >\r\n                Delete\r\n              </button>\r\n            )}\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CommentList;"],"mappings":"AAAA,OAASA,UAAU,KAAQ,OAAO,CAClC,MAAO,CAAAC,WAAW,KAAM,wBAAwB,CAChD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,QAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC/B,KAAM,CAAEE,IAAK,CAAC,CAAGX,UAAU,CAACC,WAAW,CAAC,CAExC,KAAM,CAAAW,YAAY,CAAG,KAAO,CAAAC,EAAE,EAAK,CACjC,GAAI,CACF,KAAM,CAAAX,KAAK,CAACY,MAAM,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,iBAAiBJ,EAAE,EAAE,CAAE,CACxEK,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUR,IAAI,CAACS,KAAK,EAAG,CACnD,CAAC,CAAC,CACFjB,KAAK,CAACkB,OAAO,CAAC,iBAAiB,CAAC,CAChCC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAE;AAC5B,CAAE,MAAOC,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZxB,KAAK,CAACyB,KAAK,CAAC,EAAAF,aAAA,CAAAD,GAAG,CAACI,QAAQ,UAAAH,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcI,IAAI,UAAAH,kBAAA,iBAAlBA,kBAAA,CAAoBI,OAAO,GAAI,0BAA0B,CAAC,CACxE,CACF,CAAC,CAED,mBACExB,KAAA,QAAKyB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9B5B,IAAA,OAAA4B,QAAA,CAAI,UAAQ,CAAI,CAAC,CAChBvB,QAAQ,CAACwB,MAAM,GAAK,CAAC,cACpB7B,IAAA,MAAA4B,QAAA,CAAG,kBAAgB,CAAG,CAAC,CAEvBvB,QAAQ,CAACyB,GAAG,CAAEC,OAAO,eACnB7B,KAAA,QAAuByB,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACnD1B,KAAA,MAAA0B,QAAA,eACE5B,IAAA,WAAA4B,QAAA,CAASG,OAAO,CAACC,MAAM,CAACC,KAAK,CAAS,CAAC,KAAE,CAACF,OAAO,CAACG,IAAI,EACrD,CAAC,CACH5B,IAAI,EAAIA,IAAI,CAACS,KAAK,eACjBf,IAAA,WACE2B,SAAS,CAAC,uBAAuB,CACjCQ,OAAO,CAAEA,CAAA,GAAM5B,YAAY,CAACwB,OAAO,CAACK,GAAG,CAAE,CAAAR,QAAA,CAC1C,QAED,CAAQ,CACT,GAXOG,OAAO,CAACK,GAYb,CACN,CACF,EACE,CAAC,CAEV,CAEA,cAAe,CAAAjC,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}