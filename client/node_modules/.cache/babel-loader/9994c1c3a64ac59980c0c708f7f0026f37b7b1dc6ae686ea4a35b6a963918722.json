{"ast":null,"code":"import{useContext}from\"react\";import AuthContext from\"../context/AuthContext\";import axios from\"axios\";import{toast}from\"react-toastify\";import{Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EventCard(_ref){var _event$logo,_event$venue2,_event$venue2$address,_event$category2;let{event}=_ref;const{user}=useContext(AuthContext);const handleSave=async()=>{if(!user){toast.error(\"Please log in to save events\");return;}try{var _event$venue,_event$venue$address,_event$venue$address$,_event$category;await axios.post(`${process.env.REACT_APP_API_URL}/api/events`,{eventbriteId:event.id,title:event.name.text,description:event.description.text,date:event.start.local,location:(_event$venue=event.venue)===null||_event$venue===void 0?void 0:(_event$venue$address=_event$venue.address)===null||_event$venue$address===void 0?void 0:(_event$venue$address$=_event$venue$address.localized_multi_line_address_display)===null||_event$venue$address$===void 0?void 0:_event$venue$address$.join(\", \"),category:((_event$category=event.category)===null||_event$category===void 0?void 0:_event$category.name)||\"General\"},{headers:{Authorization:`Bearer ${user.token}`}});toast.success(\"Event saved!\");}catch(err){var _err$response,_err$response$data;toast.error(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to save event\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"event-card card mb-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:((_event$logo=event.logo)===null||_event$logo===void 0?void 0:_event$logo.url)||\"https://via.placeholder.com/300x200\",className:\"card-img-top\",alt:event.name.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:event.name.text}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[new Date(event.start.local).toLocaleDateString(),\" |\",\" \",((_event$venue2=event.venue)===null||_event$venue2===void 0?void 0:(_event$venue2$address=_event$venue2.address)===null||_event$venue2$address===void 0?void 0:_event$venue2$address.city)||\"Unknown location\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:((_event$category2=event.category)===null||_event$category2===void 0?void 0:_event$category2.name)||\"General\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"btn btn-primary me-2\",children:\"Save Event\"}),/*#__PURE__*/_jsx(Link,{to:`/event/${event.id}`,className:\"btn btn-outline-primary\",children:\"View Details\"})]})]});}export default EventCard;","map":{"version":3,"names":["useContext","AuthContext","axios","toast","Link","jsx","_jsx","jsxs","_jsxs","EventCard","_ref","_event$logo","_event$venue2","_event$venue2$address","_event$category2","event","user","handleSave","error","_event$venue","_event$venue$address","_event$venue$address$","_event$category","post","process","env","REACT_APP_API_URL","eventbriteId","id","title","name","text","description","date","start","local","location","venue","address","localized_multi_line_address_display","join","category","headers","Authorization","token","success","err","_err$response","_err$response$data","response","data","message","className","children","src","logo","url","alt","Date","toLocaleDateString","city","onClick","to"],"sources":["C:/Users/bert0/bootcamp/project3/Eventure/client/src/components/EventCard.js"],"sourcesContent":["import { useContext } from \"react\";\r\nimport AuthContext from \"../context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction EventCard({ event }) {\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const handleSave = async () => {\r\n    if (!user) {\r\n      toast.error(\"Please log in to save events\");\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/api/events`,\r\n        {\r\n          eventbriteId: event.id,\r\n          title: event.name.text,\r\n          description: event.description.text,\r\n          date: event.start.local,\r\n          location: event.venue?.address?.localized_multi_line_address_display?.join(\", \"),\r\n          category: event.category?.name || \"General\",\r\n        },\r\n        { headers: { Authorization: `Bearer ${user.token}` } }\r\n      );\r\n      toast.success(\"Event saved!\");\r\n    } catch (err) {\r\n      toast.error(err.response?.data?.message || \"Failed to save event\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"event-card card mb-3\">\r\n      <img\r\n        src={event.logo?.url || \"https://via.placeholder.com/300x200\"}\r\n        className=\"card-img-top\"\r\n        alt={event.name.text}\r\n      />\r\n      <div className=\"card-body\">\r\n        <h5 className=\"card-title\">{event.name.text}</h5>\r\n        <p className=\"card-text\">\r\n          {new Date(event.start.local).toLocaleDateString()} |{\" \"}\r\n          {event.venue?.address?.city || \"Unknown location\"}\r\n        </p>\r\n        <p className=\"card-text\">{event.category?.name || \"General\"}</p>\r\n        <button onClick={handleSave} className=\"btn btn-primary me-2\">\r\n          Save Event\r\n        </button>\r\n        <Link to={`/event/${event.id}`} className=\"btn btn-outline-primary\">\r\n          View Details\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EventCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}